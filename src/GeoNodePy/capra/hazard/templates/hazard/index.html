{% extends "fullscreen.html" %}
{% load i18n %}
{% load navbar %}
{% load geonode_media %}

{% block title %} {% trans "MyHazard" %} - {{ block.super }} {% endblock %}

{% block head %}
    {% include "geonode/ext_header.html" %}
    {% include "geonode/openlayers_header.html" %}
    {% include "geonode/geoext_header.html" %}
    {% include "geonode/gxp_header.html" %}
    <script src="http://maps.google.com/maps?file=api&v=2&key={{GOOGLE_API_KEY}}"></script>
    {{ block.super }}
    <script src="{% geonode_media "capra_script" %}" type="text/javascript"></script>
    <script src="{% url capra.hazard.views.lang %}" type="text/javascript"></script>
    <script type="text/javascript">
        var app;

        var hazardConfig = {{config|safe}};
        Ext.onReady(function() {
            app = new MyHazard.Viewer({
                GEONODE_WMS: "{{GEOSERVER_BASE_URL|safe}}wms",
                hazardConfig: hazardConfig,
                proxy: "/proxy?url=",
                backgroundLayers: {{bg|safe}}
            });
        });
    </script>
{% endblock %}
