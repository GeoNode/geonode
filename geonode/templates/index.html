{% extends "site_base.html" %}
{% load i18n %}
{% load layers_tags %}
{% load staticfiles %}

{% block title %} {% trans "Welcome!" %} - {{ block.super }} {% endblock %}

{% block body_class %}home{% endblock %}

{% block body_outer %}
<div class="span12">
  {% block hero %}
  <div class="hero-unit">
    <h1>{% trans "Welcome" %}</h1>
    <div class="hero-unit-content">
      <div class="intro">
        <p>
          {% blocktrans %}
            GeoNode is an open source platform for sharing geospatial data and maps.  If you have any questions about the software or service, join our <a href="https://groups.google.com/d/forum/geonode-users">mailing list</a>.
          {% endblocktrans %}
        </p>
        <span>{% trans 'Need help' %} <a href="http://docs.geonode.org/en/latest/tutorials/users/quickstart/index.html">{% trans 'Getting Started?' %}</a></span>
      </div>
      <div class="btns">
        <a class="btn btn-large" href="{% url "layer_browse" %}">
          {% trans "Explore Layers" %}
        </a>
        <a class="btn btn-large" href="{% url "maps_browse" %}">
          {% trans "Explore Maps" %}
        </a>
      </div>
    </div>
  </div>
  {% endblock %}
  {% block mainbody %}
  <div class="row">
    <div class="span8">
      <section class="widget list">
        <h2>{% trans "Latest Layers" %}</h2>
        <div class="content" id="latest-layers">
          {% verbatim %}
          <div ng-controller="MainSearch">
            <div ng-repeat="layer in results">
              {{ layer.title }}
            </div
          </div>
          {% endverbatim %}
        </div>
      </section>
    </div>
    <aside class="span4">
      {% if request.user.is_authenticated %}
        <div class="well">
          <section>
            <h2>{% trans "Contribute" %}</h2>
            <p class="main-actions">
            {% blocktrans %}
              GeoNode enables you to upload, manage, and browse data layers. Search for data that is valuable to you, or upload your own data. 
            {% endblocktrans %}
              <a href="{% url "data_upload" %}" class="btn btn-large">{% trans 'Upload Layers' %}</a>
            {% blocktrans %}
              GeoNode enables you to compose and share maps. Create a map with our cartography tool, or explore maps shared by others. 
            {% endblocktrans %}
              <a href="{% url "new_map" %}" class="btn btn-large">{% trans 'Create a Map' %}</a>
            </p>
          </section>
        </div>
      {% endif %}
      <div class="well">
        <h2>{% trans "Latest Maps" %}</h2>
        <div class="content" id="latest-maps">
          {% verbatim %}
          <div ng-controller="MainSearch">
            <div ng-repeat="map in results">
              {{ map.title }}
            </div
          </div>
          {% endverbatim %}
        </div>
        </section>
      </div>
    </aside>
  </div>
  {% endblock %}
</div>
{% endblock %}

{% block extra_script %}
    <script type="text/javascript">
      var module = angular.module('search_layers', ['main_search']);
      module.constant('Configs', {
        url: '{% url 'api_dispatch_list' api_name='api' resource_name='layers' %}'
      });
      angular.bootstrap($('#latest-layers'), ['search_layers']);
    </script>
    <script type="text/javascript">
      var module = angular.module('search_maps', ['main_search']);
      module.constant('Configs', {
        url: '{% url 'api_dispatch_list' api_name='api' resource_name='maps' %}'
      });
      angular.bootstrap($('#latest-maps'), ['search_maps']);
    </script>
{% endblock extra_script %}
