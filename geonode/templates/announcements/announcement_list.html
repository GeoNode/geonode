{% extends "site_base.html" %}
{% load pagination_tags %}
{% load staticfiles %}
{% load url from future %}
{% load i18n %}
{% block title %} {% trans "Announcements" %} - {{ block.super }} {% endblock %}

{% block body_class %}announcements{% endblock %}

{% block body_outer %}
<div class="gd-content">
    <div class="gd-content-heading">
        <div class="row">
            <div class="col-md-8">
                <div class="title small-content">
                    {% trans "Announcements" %}
                </div>
            </div>
            <div class="col-md-4">
                <div class="small-content text-right">
                    <a href="{% url "announcements_create" %}" type="reset" class="btn btn-gd-primary">
                        {% trans "New Announcement" %}
                    </a>
                </div>
            </div>
        </div>
        <div class="hr"></div>
    </div>
    <div class="gd-content-body transparent">
        <table class="table hashr table-bordered gd-list-table">
            <thead>
                <tr>
                    <td>{% trans "Title" %}</td>
                    <td>{% trans "Level" %}</td>
                    <td>{% trans "Announcement" %}</td>
                    <td>{% trans "Published From" %}</td>
                </tr>
            </thead>
            <tbody>
            {% for announcement in announcement_list %}
            <tr>
              <td>
                <a href="{% url "announcements_update" pk=announcement.pk %}">
                  {{ announcement.title|truncatewords:50}}
                </a>
              </td>
              <td>
                {{ announcement.level_label }}
              </td>
              <td>
                {{ announcement.content|truncatewords:8 }}
              </td>
              <td>
                {% if announcement.publish_start or announcement.publish_end %}
                {% blocktrans with publish_start=announcement.publish_start|date:"F j, Y" publish_end=announcement.publish_end|date:"F j, Y"|default:"(no end date)" %}
                Published from <b>{{ publish_start }}</b> to <b>{{ publish_end }}</b>.
                {% endblocktrans %}
                {% endif %}
              </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
