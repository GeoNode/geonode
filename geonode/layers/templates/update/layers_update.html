{% extends "update/layers_update_base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block title %} {% trans "Update Layers" %} - {{ block.super }}  {% endblock %}

{% block body_class %}{% trans "layers upload" %}{% endblock %}


{% block head %}

    {{ block.super }}
{% endblock %}

{% block body_outer %}


    <div class="page-header">
        <a href="{% url "layer_browse" %}?limit={{ CLIENT_RESULTS_LIMIT }}"
           class="btn btn-primary pull-right">{% trans "Explore Layers" %}</a>
        <h2 class="page-title">{% trans "Update Layers" %}</h2>


    </div>
    <div class="row">
        <div class="col-md-8">


            {% block additional_info %}{% endblock %}

            {% if errors %}
                <div id="errors" class="alert alert-danger">
                    {% for error in errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div id="upload-status"></div>

            <section id="drop-zone" style="border: 0px dashed #777777;">



          

                <h3><i class="fa fa-square-o fa-4x rotate-45"></i><br/>Layers</h3>
            </section>


            <section>
                <a href="{% url "start_layers_update" %}" class="btn btn-danger">{% trans "Update Layers" %}</a>

                 <div   class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:100%">


                     <div>
                         <h3>{% trans "Inspecting the available layers in GeoServer ..." %}</h3>
                         <h4>{% trans "Layer Names" %}: {{ layer_name }}</h4>
                          <h4>{% trans "Deleted" %}: {{ deleted }}</h4>
                          <h4>{% trans "Failed" %}: {{ failed }}</h4>
                          <h4>{% trans "Updated" %}: {{ updated }}</h4>
                          <h4>{% trans "Duration" %}: {{ duration }}</h4>
                     </div>
                      </div>
            </section>


        </div>






        {% if GEONODE_SECURITY_ENABLED %}

        {% endif %}
    </div>
{% endblock %}


{% block extra_script %}
    {{ block.super }}
    <script data-main="{% static 'geonode/js/upload/main' %}"
            src="{% static 'lib/js/require.js' %}">
    </script>
    <script type="text/javascript">
        {% autoescape off %}

            csrf_token = "{{ csrf_token }}",
                form_target = "{{ UPLOADER_URL }}",
                time_enabled = {{ TIME_ENABLED|lower  }},
                mosaic_enabled = {{ MOSAIC_ENABLED|lower  }},
                userLookup = "{% url "account_ajax_lookup" %}"

        {% endautoescape %}

    </script>
    {% if GEONODE_SECURITY_ENABLED %}
        {% with resource=layer %}
            {% include "_permissions_form_js.html" %}
        {% endwith %}
    {% endif %}
{% endblock extra_script %}

