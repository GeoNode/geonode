{% extends "site_base.html" %}


{% block title %}{% endblock %}




{% block body_class %}layers{% endblock %}

{% block body_outer %}
<div class="page-header">
</div>
<div id = 'monthly_datarequest' style='width: 1000px; height: 800px;'>
</div>
<div id = 'org_datarequest' style='width: 1000px; height: 800px;'>
</div>

{% endblock %}

{% block extra_script %}
<script src="{{ STATIC_URL }}lib/js/plotly-latest.min.js"></script>
<script type="text/javascript">
var trace1 = {
  x: [
    {% for key, value in monthly_count.items %}
      '{{ key }}',
    {% endfor %}
  ],
  y: [
    {% for key, value in monthly_count.items %}
      {{ value.pending }},
    {% endfor %}
  ],
  name: 'Pending',
  type: 'bar',
  marker: {
    color: '#DC3912'
  }
};
var trace2 = {
  x: [
    {% for key, value in monthly_count.items %}
      '{{ key }}',
    {% endfor %}
  ],
  y: [
    {% for key, value in monthly_count.items %}
      {{ value.approved }},
    {% endfor %}
  ],
  name: 'Approved',
  type: 'bar',
  marker: {
    color: '#FF9900'
  }
};
var trace3 = {
  x: [
    {% for key, value in monthly_count.items %}
      '{{ key }}',
    {% endfor %}
  ],
  y: [
    {% for key, value in monthly_count.items %}
      {{ value.cancelled }},
    {% endfor %}
  ],
  name: 'Cancelled',
  type: 'bar',
  marker: {
    color: '#3366CB'
  }
};
var trace4 = {
  x: [
    {% for key, value in monthly_count.items %}
      '{{ key }}',
    {% endfor %}
  ],
  y: [
    {% for key, value in monthly_count.items %}
      {{ value.rejected }},
    {% endfor %}
  ],
  name: 'Rejected',
  type: 'bar',
  marker: {
    color: '#109618'
  }
};
var trace5 = {
  x: [
    {% for key, value in monthly_count.items %}
      '{{ key }}',
    {% endfor %}
  ],
  y: [
    {% for key, value in monthly_count.items %}
      {{ value.unconfirmed }},
    {% endfor %}
  ],
  name: 'Unconfirmed',
  type: 'bar',
  marker: {
    color: '#990099'
  }
};

var data = [trace5, trace4, trace3, trace2, trace1];

var layout = {barmode: 'stack',
              xaxis: {autorange: 'reversed'}};

Plotly.newPlot('monthly_datarequest', data, layout);

var org1 = {
  x: [
    {% for key, value in org_count.items %}
      '{{ key }}',
    {% endfor %}
  ],
  y: [
    {% for key, value in org_count.items %}
      {{ value }},
    {% endfor %}
  ],
  name: 'LiPAD',
  type: 'bar',
  marker: {
    color: '#DC3912'
  }
};

var data_org = [org1];

var layout_org = {barmode: 'stack',
              xaxis: {autorange: 'reversed'}};

Plotly.newPlot('org_datarequest', data_org, layout_org);

</script>
{% endblock extra_script %}
