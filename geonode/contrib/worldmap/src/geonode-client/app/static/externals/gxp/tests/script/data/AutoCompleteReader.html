<!DOCTYPE html>
<html debug="true">
  <head>
    <script src="http://extjs.cachefly.net/ext-3.4.0/adapter/ext/ext-base.js"></script>
    <script src="http://extjs.cachefly.net/ext-3.4.0/ext-all-debug.js"></script>
    <script type="text/javascript" src="../../../externals/openlayers/lib/OpenLayers.js"></script>
    <script type="text/javascript" src="../../../externals/geoext/lib/GeoExt.js"></script>
    <script type="text/javascript" src="../../../src/script/loader.js"></script>

    <script type="text/javascript">
       
        function test_AutoCompleteReader(t) {
            t.plan(3);
            
            var instance = new gxp.data.AutoCompleteReader({uniqueField: 'field1'}, ['field1', 'field2']);
            
            t.ok(instance instanceof gxp.data.AutoCompleteReader, "Instance created successfully");

            var features = [
                new OpenLayers.Feature.Vector(null, {'field1': 'bar', 'field2': 'foo1'}),
                new OpenLayers.Feature.Vector(null, {'field1': 'bar', 'field2': 'foo2'})
            ];

            var response = {features: features};
            t.eq(response.features.length, 2, "Initially there are 2 features");
            instance.read(response);
            t.eq(response.features.length, 1, "After filtering out duplicates there is 1 feature");
        }

    </script>
  </head>
  <body>
  </body>
</html>
