{% include "geonode/ext_header.html" %}
{# {% include "geonode/app_header.html" %} #}
{#  {% include "maptiles/maptiles_header.html" %} #}
<script type="text/javascript" src="{{STATIC_URL}}lib/js/OpenLayers.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}lib/js/GeoExt.js"></script>
<script type="text/javascript" src="{{ STATIC_URL}}geonode/js/utils/thumbnail.js"></script>
<script type="text/javascript" >

{% autoescape off %}

var options = {{ viewer|safe }};
Ext.onReady(function (){
        var map_options = options["map"];
        var map = new OpenLayers.Map({
            center: map_options["center"],
            units: map_options["units"],
            maxResolution: map_options["maxResolution"],
            maxExtent: map_options["maxExtent"],
            zoom: map_options["zoom"],
            projection: map_options["projection"]
        
        });
        var layers_list = [];
        for (var layer in map_options["layers"]){
            var tmp_layer;
            if (layer["type"]){
                switch (layer["type"]){
                    case "OpenLayers.Layer.OSM": 
                }
            }
        }
        
        new GeoExt.MapPanel({
            renderTo: "preview_map",
            height: 400,
            map: map,
            title: "Test Map"
            //layers: map_options["layers"]
        });
        
});
{% endautoescape %}
</script>
