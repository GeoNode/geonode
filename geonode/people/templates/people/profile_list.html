{% extends "people/profile_base.html" %}
{% load i18n %}

{% block body_class %}people people-list explore{% endblock %}

{% block body %}
    <div class="span12">
      <h2 class="page-title">{% trans "Explore People" %}</h2>
    </div>
    <div class="span8 filter">      
      {% include "search/_sort_filters.html" %}
    </div>
    <div class="span4">
      <div class="pull-right" data-viewby="list">
        {% include "_viewby.html" %}
      </div>
    </div>
    <div class="span12">
      <div class="row" ng-controller="profileController">
        <div class="tab-content span12" id="search-content" ng-repeat="profile in profile_results">
          {% include "people/_profile_list_item.html" %}
        </div>
      </div>
    </div>
{% endblock %}
{% block extra_script %}
<script type="text/javascript">
  SEARCH_URL = '{% url 'api_dispatch_list' api_name='api' resource_name='profiles' %}';
  'use strict';
  (function(){
    var module = angular.module('profile_search', []);
    module.controller('profileController', function($scope, $http){
      $http.get(SEARCH_URL).success(function(data){
        $scope.profile_results = data.objects;
      });
    });
    angular.bootstrap(document, ['profile_search']);
  })();
</script>
{% endblock extra_script %}