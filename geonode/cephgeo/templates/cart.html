{% extends "ceph_base.html" %}
{% load i18n %}

{% load staticfiles %}
{% load url from future %}

{% load eula_extras %}

{% block title %} {% trans "Cart" %} - {{ block.super }} {% endblock %}

{% block body_class %}Cephgeo cart{% endblock %}

{% block body_outer %}
  {% block body %}
  {% eula_modal_dialog "/ceph/ftp/" %} 
<!--
    #TODO: CHECK IF CART IS EMPTY BEFORE CREATING FTP REQUEST!
-->
  <div class="page-header">
  {% if not cart.is_empty %}
    <ul class="list-inline pull-right" id="sort">
      <li><a href="{% url 'maptiles.views.tiled_view' %}"><button class="btn btn-default">{% trans "Return to Selection" %}</button></a></li>
      <li><button class="btn btn-default" data-toggle="modal" data-target="#eula-dialog">{% trans "Create FTP Folder" %}</a></li>
      <li><a href="{% url 'cephgeo.views.clear_cart' %}"><button class="btn btn-default">{% trans "Remove All Items" %}</button></a></li>
    </ul>
  {% else %}
    <ul class="list-inline pull-right" id="sort">
      <li><a href="{% url 'maptiles.views.tiled_view' %}"><button class="btn btn-default">{% trans "Return to Selection" %}</button></a></li>
    </ul>
  {% endif %}
  
  {% if not cartsize %}
    <h2 class="page-title">{% trans "Cart" %}</h2>
  {% else %}
    <h2 class="page-title">{% trans "Cart [{{ cartsize | filesizeformat }}]" %}</h2>
  {% endif %}
    
  </div>
  <div>
	<ul>
	  {% for message in messages %}
	    {% if 'error' in message.tags %}<li>{{ message }}</li>{% endif %}
	  {% endfor %}
	</ul>
  </div> 
  <table border="3" style="width:100%">
        <tr>
            <th>Product</th>
            <th>Size</th>
            <th>Quantity</th>
<!--
            <th>Total Price</th>
-->
        </tr>
        {% for item in cart %}
        <tr>
            <td>  {{ item.product.name }}</td>
            <td>  {{ item.product.size_in_bytes | filesizeformat }}</td>
            <td>  {{ item.quantity }}</td>
<!--
            <td>  {{ item.total_price }}</td>
-->
        </tr>
        {% endfor %}
    </table>
{% endblock body %}
 {% block sidebar %}{% endblock sidebar %}
{% endblock body_outer %}



